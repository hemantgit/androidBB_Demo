{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*","webpack:///webpack/bootstrap ad4521179a56c78168f9?1422*","webpack:///./config-bb-module-loader/model.xml","webpack:///./config-bb-module-loader/scripts/index.js"],"names":["bundleDefinition","window","location","search","indexOf","getV5","b$","portal","contextRoot","config","resourceRoot","portalName","pageName","getV6","cxpFeature","portalClient","getFeature","get","DEFAULT_CONFIG","portalConfig","BB","PROTOCOL_REGEX","hasProtocol","test","str","nameToPath","name","i","hasInternalPath","isAbsolutePath","itemType","moduleName","slice","internalPath","bundles","map","length","bundle","page","bundleName","bundlePath","path","dependencies","forEach","dep","systemNormalize","System","normalize","systemTranslate","translate","parentName","isPlugin","call","load","source","args"],"mappings":"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","file":"config-bb-module-loader/scripts/config-bb-module-loader.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"config-bb-module-loader\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"config-bb-module-loader\"] = factory();\n\telse\n\t\troot[\"config-bb-module-loader\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ad4521179a56c78168f9","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config-bb-module-loader/model.xml\n// module id = 0\n// module chunks = 1","/* global System window */\n/**\n * @module config-bb-module-loader\n *\n * @description\n * Configuration module for the SystemJS module loader\n *\n * This configuration module is intended to be replaced and overwritten per project. It is used\n * to customize the SystemJS Module loader, which can be used to both lazy-load modules demand and\n * to locate modules within optimized bundles.\n *\n * The full power of SystemJS is available and the documentation on its configuration can be found\n * on the project's page, specifically\n * https://github.com/systemjs/systemjs/blob/0.19.38/docs/config-api.md\n *\n * The default implementation in this module lazy-loads all modules based on the naming convention\n * that is compatible with other tooling (`bb-package`) and the default CXP file structure.\n *\n * E.g.\n * Loading `lib-bb-i18n-ng`\n * -> `<RESOURCE_ROOT>/statics/features/[BBHOST]/lib-bb-i18n-ng/scripts/lib-bb-i18n-ng.js`\n *\n * Loading `widget-bb-sample-ng`\n * -> `<RESOURCE_ROOT>/statics/widgets/[BBHOST]/widget-bb-example-ng/scripts/widget-bb-sample-ng.js`\n *\n * Loading `config-bb-locale/assets/custom-locale.json`\n * -> `<RESOURCE_ROOT>/statics/features/[BBHOST]/config-bb-locale/assets/custom-locale.json`\n *\n * Where `RESOURCE_ROOT` is configured on the portal server\n *\n * The default implementation is generated by the [@bb-cli/bb-bundle](http://npmjs.com/package/@bb-cli/bb-bundle)\n * tool. It's recommended that you also use this tool to generate your own config as it will\n * allow you to create concatted and minified JS bundles.\n */\n\n// eslint-disable-next-line\nlet bundleDefinition = [];\n\nif (window.location.search.indexOf('--no-bundle') > -1) bundleDefinition = [];\n\nconst getV5 = () => window.b$ &&\n    window.b$.portal && {\n      contextRoot: window.b$.portal.config.resourceRoot,\n      portalName: window.b$.portal.portalName,\n      pageName: window.b$.portal.pageName,\n    };\n\nconst getV6 = () => {\n  const cxpFeature = window.portalClient &&\n        window.portalClient.getFeature &&\n        window.portalClient.getFeature('cxp');\n  return cxpFeature && {\n    contextRoot: cxpFeature.config.get('contextRoot'),\n    portalName: cxpFeature.config.get('portalName'),\n    pageName: cxpFeature.config.get('pageName'),\n  };\n};\n\nconst DEFAULT_CONFIG = {\n  contextRoot: '/portalserver',\n  portalName: '',\n  pageName: '',\n};\n\nconst portalConfig = (window.BB && window.BB.config) ||\n    getV6() ||\n    getV5() ||\n    DEFAULT_CONFIG;\n\nconst PROTOCOL_REGEX = /^[A-z][A-z0-9+.-]+:\\/\\//;\nconst hasProtocol = str => (PROTOCOL_REGEX.test(str));\n\nconst nameToPath = (name, contextRoot) => {\n  const i = name.indexOf('/');\n  const hasInternalPath = (i !== -1);\n  const isAbsolutePath = (i === 0) || hasProtocol(name);\n\n  if (isAbsolutePath) {\n    return name;\n  }\n\n  const itemType = name.indexOf('widget-') === 0 ? 'widgets' : 'features';\n  const moduleName = hasInternalPath ? name.slice(0, i) : name;\n  const internalPath = hasInternalPath ? name.slice(i + 1) : `scripts/${name}.js`;\n\n  return `${contextRoot}/static/${itemType}/[BBHOST]/${moduleName}/${internalPath}`;\n};\n\n// Get bundls that are relevant for the current page.\nconst bundles = {};\nconst map = {};\nfor (let i = 0; i < bundleDefinition.length; i++) {\n  const bundle = bundleDefinition[i];\n  if (bundle.portal) {\n    if (portalConfig.portalName !== bundle.portal) continue;\n    if (bundle.page && portalConfig.pageName !== bundle.page) continue;\n  }\n  const bundleName = `bundle${i}`;\n  const bundlePath = nameToPath(bundle.path, portalConfig.contextRoot);\n  bundles[bundlePath] = bundle.dependencies;\n  map[bundleName] = bundlePath;\n  bundle.dependencies.forEach(dep => (map[dep] = nameToPath(dep, portalConfig.contextRoot)));\n}\n\nconst systemNormalize = System.normalize;\nconst systemTranslate = System.translate;\nSystem.config({\n  bundles,\n  map,\n  normalize(name, parentName, isPlugin) {\n    return systemNormalize.call(this,\n      nameToPath(name, portalConfig.contextRoot), parentName, isPlugin);\n  },\n  translate(load, ...args) {\n    if (load.name.indexOf('.json') === load.name.length - 5) {\n      return `module.exports = ${load.source};`;\n    }\n    return systemTranslate.call(this, load, ...args);\n  },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./config-bb-module-loader/scripts/index.js"],"sourceRoot":""}